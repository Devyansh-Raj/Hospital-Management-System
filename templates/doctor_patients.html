{% extends "base.html" %}

{% block title %}My Patients - Dr. {{ doctor.name }}{% endblock %}

{% block nav_items %}
    <li class="nav-item">
        <a class="nav-link" href="/doctor/appointments/{{ doctor.id }}">My Appointments</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/doctor/patients/{{ doctor.id }}">My Patients</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/doctor/availability/{{ doctor.id }}">Manage Availability</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/logout">Logout</a>
    </li>
{% endblock %}

{% block content %}
<h1 class="page-title">
    <i class="fas fa-users-medical me-2"></i>My Patients
</h1>

<div class="mb-4">
    <p class="text-muted mb-2">
        <strong>Dr. {{ doctor.name }}</strong> — {{ doctor.specialization }}
    </p>
    <span class="badge badge-primary" style="font-size: 14px; padding: 6px 12px;">
        <i class="fas fa-users me-1"></i>{{ patients|length }} Patient{{ "s" if patients|length != 1 else "" }}
    </span>
</div>

{% if patients %}
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>Patient Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>User ID</th>
                </tr>
            </thead>
            <tbody>
                {% for patient in patients %}
                    <tr>
                        <td>
                            <strong>{{ patient.username }}</strong>
                        </td>
                        <td>{{ patient.email }}</td>
                        <td>
                            {% if patient.phone %}
                                {{ patient.phone }}
                            {% else %}
                                <span class="text-muted">—</span>
                            {% endif %}
                        </td>
                        <td>
                            <span class="badge badge-secondary">{{ patient.id }}</span>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-4">
        <small class="text-muted">
            <i class="fas fa-info-circle me-2"></i>Showing {{ patients|length }} unique patient{{ "s" if patients|length != 1 else "" }} treated by you
        </small>
    </div>
{% else %}
    <div class="empty-state">
        <i class="fas fa-inbox"></i>
        <h5>No patients yet</h5>
        <p>Your patient list will appear here after your first appointment</p>
    </div>
{% endif %}

{% endblock %}
